# 多种编码方式

基于`CYFS`的所有信息都可以选择下列三种编码方式其中一种，`Protobuf`和`JSON`都有其标准的编码规范，这里不再赘述，我们只介绍二进制编码格式。

1. 二进制流

    二进制格式编码，通常用于标准化固定编码，最省空间，但不易扩展。

    选用二进制流编码，需要类型设计者按确定顺序逐个字段填入`Buffer`。

2. Protobuf

    用`Protobuf`编码，同时兼顾一定的空间效率和扩展性，这是大部分复杂类型选用的编码方式。

    选用`Protobuf`编码，类型设计者只需要把对象的各个字段赋值给对应`Protobuf`类型，然后使用`Protobuf`方法进行编解码即可，兼容性处理需要参照`Protobuf`规范。

    **注意：我们选用的`Protobuf`规范是`Proto3`，考虑到向后兼容性，`Protobuf`版本也不太可能升级。当然新设计的类型可以选用其他版本，但需要慎重引入不同版本。**

3. JSON

    用 `JSON` 编码，空间效率较低，但可读性好。

    因为其空间效率较低，通常不选择`JSON`方式对信息进行编解码，`JSON`编码通常出现在人机交互的场景。

**不管选用哪种编码方式，用于对象编码时都要注意编码的稳定性(如：Set 和 Map 应该注意各元素顺序)，否则相同内容多次计算得到的`ObjectId`可能不同。**
